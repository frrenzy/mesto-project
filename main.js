(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){r(e,t),t.add(e)}function n(e,t,n){r(e,t),t.set(e,n)}function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,c(e,t,"get"))}function a(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,c(e,t,"set"),n),n}function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var u=new WeakMap,l=new WeakMap,s=new WeakMap,p=new WeakMap,f=new WeakMap,h=new WeakMap,d=new WeakMap,v=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,m=new WeakSet,g=new WeakSet,_=new WeakSet,k=new WeakSet,E=function(){function r(e,o,i){var c=e.name,E=e.link,P=e._id,S=e.likes,O=e.owner,L=o.addLike,j=o.deleteLike,C=o.openPopup,T=o.deletePopup;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,k),t(this,_),t(this,g),t(this,m),n(this,u,{writable:!0,value:void 0}),n(this,l,{writable:!0,value:void 0}),n(this,s,{writable:!0,value:void 0}),n(this,p,{writable:!0,value:void 0}),n(this,f,{writable:!0,value:void 0}),n(this,h,{writable:!0,value:void 0}),n(this,d,{writable:!0,value:void 0}),n(this,v,{writable:!0,value:void 0}),n(this,y,{writable:!0,value:void 0}),n(this,w,{writable:!0,value:void 0}),n(this,b,{writable:!0,value:void 0}),a(this,s,E),a(this,l,c),a(this,u,i),a(this,h,O),a(this,p,P),a(this,f,S),a(this,v,L),a(this,y,j),a(this,w,C),a(this,b,T)}var c,E;return c=r,(E=[{key:"createCardMarkup",value:function(){a(this,d,o(this,m,P).call(this));var e=i(this,d).querySelector(".pics__pic"),t=i(this,d).querySelector(".pics__delete"),n=i(this,d).querySelector(".pics__like"),r=i(this,d).querySelector(".pics__like-counter");return e.src=i(this,s),e.alt=i(this,l),e.dataset.id=i(this,p),r.textContent=i(this,f).length,i(this,d).querySelector(".pics__pic-name").textContent=i(this,l),i(this,f).find((function(e){return e._id===localStorage.getItem("profileId")}))&&n.classList.add("pics__like_active"),i(this,h)._id!==localStorage.getItem("profileId")&&t.classList.add("pics__delete_hidden"),o(this,k,L).call(this,e,t,r,n),i(this,d)}}])&&e(c.prototype,E),Object.defineProperty(c,"prototype",{writable:!1}),r}();function P(){return document.querySelector(i(this,u)).content.querySelector("li").cloneNode(!0)}function S(e,t){e.classList.contains("pics__like_active")?i(this,y).call(this,i(this,p)).then((function(n){e.classList.remove("pics__like_active"),t.textContent=n.likes.length})).catch(console.log):i(this,v).call(this,i(this,p)).then((function(n){e.classList.add("pics__like_active"),t.textContent=n.likes.length})).catch(console.log)}function O(){localStorage.setItem("cardId",i(this,p)),i(this,b).call(this)}function L(e,t,n,r){var a=this;e.addEventListener("click",(function(){i(a,w).call(a,e.src,e.alt)})),r.addEventListener("click",(function(){o(a,g,S).call(a,r,n,i(a,p))})),t.addEventListener("click",(function(){o(a,_,O).call(a)}))}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){T(e,t),t.set(e,n)}function T(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function W(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function M(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,x(e,t,"get"))}function q(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,x(e,t,"set"),n),n}function x(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var R=new WeakMap,I=new WeakMap,A=new WeakSet;function B(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}const z=new(function(){function e(t){var n,r=t.baseUrl,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,n=A),n.add(this),C(this,R,{writable:!0,value:void 0}),C(this,I,{writable:!0,value:void 0}),q(this,R,r),q(this,I,o)}var t,n;return t=e,(n=[{key:"getUser",value:function(){return fetch("".concat(M(this,R),"/users/me"),{headers:M(this,I)}).then(W(this,A,B))}},{key:"getCards",value:function(){return fetch("".concat(M(this,R),"/cards"),{headers:M(this,I)}).then(W(this,A,B))}},{key:"editProfile",value:function(e){return fetch("".concat(M(this,R),"/users/me"),{method:"PATCH",body:JSON.stringify(e),headers:M(this,I)}).then(W(this,A,B))}},{key:"addCard",value:function(e){return fetch("".concat(M(this,R),"/cards"),{method:"POST",body:JSON.stringify(e),headers:M(this,I)}).then(W(this,A,B))}},{key:"deleteCard",value:function(e){return fetch("".concat(M(this,R),"/cards/").concat(e),{method:"DELETE",headers:M(this,I)}).then(W(this,A,B))}},{key:"addLike",value:function(e){return fetch("".concat(M(this,R),"/cards/likes/").concat(e),{method:"PUT",headers:M(this,I)}).then(W(this,A,B))}},{key:"deleteLike",value:function(e){return fetch("".concat(M(this,R),"/cards/likes/").concat(e),{method:"DELETE",headers:M(this,I)}).then(W(this,A,B))}},{key:"editAvatar",value:function(e){return fetch("".concat(M(this,R),"/users/me/avatar"),{method:"PATCH",body:JSON.stringify(e),headers:M(this,I)}).then(W(this,A,B))}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/plus-cohort-13",headers:{authorization:"0347b600-c1ce-41de-a88e-cd44ae7745f0","Content-Type":"application/json"}});var D=["inputSelector","submitButtonSelector","inactiveButtonClass"];function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){H(e,t),t.add(e)}function J(e,t,n){H(e,t),t.set(e,n)}function H(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function V(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,G(e,t,"get"))}function $(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function F(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,G(e,t,"set"),n),n}function G(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var K=new WeakMap,Q=new WeakMap,X=new WeakSet,Y=new WeakSet,Z=new WeakSet,ee=new WeakSet,te=new WeakSet,ne=new WeakSet,re=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,ne),N(this,te),N(this,ee),N(this,Z),N(this,Y),N(this,X),J(this,K,{writable:!0,value:void 0}),J(this,Q,{writable:!0,value:void 0}),F(this,K,t),F(this,Q,n)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){V(this,Q).addEventListener("submit",(function(e){e.preventDefault()})),$(this,ne,le).call(this)}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oe(e){return e.some((function(e){return!e.validity.valid}))}function ie(e,t){$(this,X,oe).call(this,e)?(t.classList.add(V(this,K).inactiveButtonClass),t.setAttribute("disabled","")):(t.classList.remove(V(this,K).inactiveButtonClass),t.removeAttribute("disabled"))}function ae(e){var t=V(this,Q).querySelector(".".concat(e.id,"-error"));e.classList.add(V(this,K).inputErrorClass),t.textContent=e.validationMessage,t.classList.add(V(this,K).errorClass)}function ce(e){var t=V(this,Q).querySelector(".".concat(e.id,"-error"));e.classList.remove(V(this,K).inputErrorClass),t.classList.remove(V(this,K).errorClass),t.textContent=""}function ue(e){e.validity.valid?$(this,ee,ce).call(this,e):$(this,Z,ae).call(this,e)}function le(){var e=this,t=V(this,K),n=t.inputSelector,r=t.submitButtonSelector,o=(t.inactiveButtonClass,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,D)),i=Array.from(V(this,Q).querySelectorAll(n)),a=V(this,Q).querySelector(r);$(this,Y,ie).call(this,i,a),V(this,Q).addEventListener("reset",(function(){$(e,Y,ie).call(e,i,a)})),i.forEach((function(t){t.addEventListener("input",(function(){$(e,te,ue).call(e,t,o),$(e,Y,ie).call(e,i,a)}))}))}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function fe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,de(e,t,"get"))}function he(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,de(e,t,"set"),n),n}function de(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ve=new WeakMap,ye=new WeakMap,we=new WeakMap,be=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pe(this,ve,{writable:!0,value:void 0}),pe(this,ye,{writable:!0,value:void 0}),pe(this,we,{writable:!0,value:void 0}),he(this,ve,r),he(this,ye,o),he(this,we,document.querySelector(n))}var t,n;return t=e,(n=[{key:"addItem",value:function(e){fe(this,we).prepend(e)}},{key:"render",value:function(){var e=this;fe(this,ve).forEach((function(t){var n=fe(e,ye).call(e,t);e.addItem(n)}))}}])&&se(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,n)}var _e=new WeakMap,ke=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={writable:!0,value:function(e){"Escape"===e.key&&i.closePopup()}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,r=_e),r.set(n,o),this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"closePopup",value:function(){document.removeEventListener("keydown",ge(this,_e)),this._popup.classList.remove("popup_opened")}},{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",ge(this,_e))}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.closePopup()}))}}])&&me(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(){return Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Oe(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Se.apply(this,arguments)}function Oe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Te(e)););return e}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function je(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ce(e)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function We(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Me(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,xe(e,t,"get"))}function qe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,xe(e,t,"set"),n),n}function xe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Re=new WeakMap,Ie=new WeakMap,Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(r);if(o){var n=Te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return je(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),We(Ce(t=i.call(this,e)),Re,{writable:!0,value:void 0}),We(Ce(t),Ie,{writable:!0,value:void 0}),qe(Ce(t),Re,t._popup.querySelector(".popup__picture")),qe(Ce(t),Ie,t._popup.querySelector(".popup__title")),t}return t=a,(n=[{key:"openPopup",value:function(e,t){Me(this,Re).src=e,Me(this,Re).alt=t,Me(this,Ie).textContent=t,Se(Te(a.prototype),"openPopup",this).call(this)}},{key:"closePopup",value:function(){Se(Te(a.prototype),"closePopup",this).call(this),Me(this,Re).src="",Me(this,Ie).textContent="",Me(this,Re).alt=""}}])&&Pe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ke);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(){return Ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Ne(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ue.apply(this,arguments)}function Ne(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$e(e)););return e}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function He(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ve(e)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){Qe(e,t),t.add(e)}function Ke(e,t,n){Qe(e,t),t.set(e,n)}function Qe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ze(e,t,"get"))}function Ye(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ze(e,t,"set"),n),n}function Ze(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakSet,ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$e(r);if(o){var n=$e(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return He(this,e)});function a(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return ze(this,a),Ge(Ve(n=i.call(this,e)),rt),Ke(Ve(n),et,{writable:!0,value:void 0}),Ke(Ve(n),tt,{writable:!0,value:void 0}),Ke(Ve(n),nt,{writable:!0,value:void 0}),Fe(Ve(n),"toggleLoading",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Сохранить";Xe(Ve(n),tt).querySelector(".popup__submit").textContent=e?"Сохранение...":t})),Ye(Ve(n),et,t),Ye(Ve(n),tt,n._popup.querySelector(".popup__form")),Ye(Ve(n),nt,r),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;Ue($e(a.prototype),"setEventListeners",this).call(this),Xe(this,tt).addEventListener("submit",(function(){Xe(e,et).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,rt,it).call(e)),e.closePopup()}))}},{key:"openPopup",value:function(){var e=this,t=Xe(this,nt).call(this);t&&Object.keys(t).forEach((function(n){Xe(e,tt).elements[n].value=t[n]})),Ue($e(a.prototype),"openPopup",this).call(this)}},{key:"closePopup",value:function(){Ue($e(a.prototype),"closePopup",this).call(this),Xe(this,tt).reset()}}])&&De(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ke);function it(){var e,t={};return null===(e=Xe(this,tt).querySelectorAll(".popup__input"))||void 0===e||e.forEach((function(e){t[e.name]=e.value})),t}var at,ct=document.querySelector(".profile__name"),ut=document.querySelector(".profile__description"),lt=document.querySelector(".profile__pic"),st=document.querySelector(".profile__edit-avatar"),pt=document.querySelector(".profile__edit"),ft=document.querySelector(".profile__add");function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dt=new Ae(".popup_type_picture");dt.setEventListeners();var vt=new ot(".popup_type_profile",(function(e){vt.toggleLoading(!0),z.editProfile(e).then((function(e){ct.textContent=e.name,ut.textContent=e.about})).catch(console.log).finally((function(){vt.toggleLoading(!1)}))}),(function(){return{name:ct.textContent,about:ut.textContent}}));vt.setEventListeners();var yt=new ot(".popup_type_avatar",(function(e){yt.toggleLoading(!0),z.editAvatar(e).then((function(e){lt.src=e.avatar})).catch(console.log).finally((function(){yt.toggleLoading(!1)}))}));yt.setEventListeners();var wt=new ot(".popup_type_card",(function(e){wt.toggleLoading(!0),z.addCard(e).then((function(e){var t=new E(e,{addLike:function(e){return z.addLike(e)},deleteLike:function(e){return z.deleteLike(e)},openPopup:function(e,t){return dt.openPopup(e,t)},deletePopup:function(){return bt.openPopup()}},"#pic-template");at.addItem(t.createCardMarkup()),wt.closePopup()})).catch(console.log).finally((function(){wt.toggleLoading(!1,"Создать")}))}));wt.setEventListeners();var bt=new ot(".popup_type_delete",(function(e){bt.toggleLoading(!0);var t=localStorage.getItem("cardId");z.deleteCard(t).then((function(e){document.querySelector('.pics__pic[data-id="'.concat(t,'"]')).closest("li").remove(),bt.closePopup()})).catch(console.log).finally((function(){bt.toggleLoading(!1,"Да")}))}));bt.setEventListeners(),Promise.all([z.getUser(),z.getCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ct.textContent=o.name,ut.textContent=o.about,lt.src=o.avatar,localStorage.setItem("profileId",o._id),(at=new be({items:i.reverse(),renderer:function(e){return new E(e,{addLike:function(e){return z.addLike(e)},deleteLike:function(e){return z.deleteLike(e)},openPopup:function(e,t){return dt.openPopup(e,t)},deletePopup:function(){return bt.openPopup()}},"#pic-template").createCardMarkup()}},".pics__grid")).render()})).catch(console.log),ft.addEventListener("click",(function(){wt.openPopup()})),pt.addEventListener("click",(function(){vt.openPopup()})),st.addEventListener("click",(function(){yt.openPopup()})),Array.from(Object.values(document.forms)).forEach((function(e){new re({inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},e).enableValidation()}))})();